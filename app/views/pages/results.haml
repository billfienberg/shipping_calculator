%table 
	%tr
		%th{colspan:6} Origin
		%th{colspan:6} Destination
	%tr
		%th Origin ID
		%th Name
		%th Address
		%th City
		%th State
		%th Zip
		%th Destination ID
		%th Name
		%th Address
		%th City
		%th State
		%th Zip
	%tr
		%td= @origin.id
		%td= @origin.name
		%td= @origin.address
		%td= @origin.city
		%td= @origin.state
		%td= @origin.zip
		%td= @destination.id
		%td= @destination.name
		%td= @destination.address
		%td= @destination.city
		%td= @destination.state
		%td= @destination.zip
%br
%table
	%tr
		%th{rowspan: 2} Carrier
		%th{rowspan: 2} Pickup Date
		%th{rowspan: 2} Transit Time
		%th{rowspan: 2} Expected Delivery Day (EDD)
		%th{colspan: 7} Can the Carrier Deliver to this Location on This Day of the Week?
		%th{rowspan: 2} Can Deliver on EDD?
	%tr
		%th Sunday
		%th Monday
		%th Tuesday
		%th Wednesday
		%th Thursday
		%th Friday
		%th Saturday
	- @recommended = []
	- if @carriers.length == 0
		%td= link_to "Add an Approved Carrier for this Destination", new_destination_carrier_destination_path(@destination.id)
	- @carriers.each do |c|
		%tr
			%td= Carrier.find(c.carrier_id).name
			%td= @pickup_date
			- if TransitTime.where(origin_id: @origin.id, destination_id: @destination.id, carrier_id: c.carrier_id).last == nil
				%td= link_to "Update this carrier's transit time", new_origin_destination_carrier_transit_time_path(@origin.id, @destination.id, c.id)
				%td= "N/A"
			- else
				- @transit_time = TransitTime.where(origin_id: @origin.id, destination_id: @destination.id, carrier_id: c.carrier_id).last.number_of_days.to_i
				%td= "#{@transit_time} day(s)"
				- @earliest = (@pickup_date.to_date + @transit_time.days)
				- @edd_plus_1 = (@earliest + 1.days)
				
				- @edd_plus_2 = (@earliest + 2.days)
				- @edd_plus_3 = (@earliest + 3.days)
				- @edd_plus_4 = (@earliest + 4.days)
				- @edd_plus_5 = (@earliest + 5.days)
				- @edd_plus_6 = (@earliest + 6.days)
				- @edd_plus_7 = (@earliest + 7.days)
				- @edd_plus_8 = (@earliest + 8.days)
				- @edd_plus_9 = (@earliest + 9.days)
				- @edd_plus_10 = (@earliest + 10.days)
				- @dotw = @earliest.strftime('%A')
				%td= @earliest.strftime('%A %B %d, %Y')
				- if Day.where(destination_id: @destination.id, carrier_id: c.carrier_id).last == nil
					%td{colspan:7}= link_to "Update this carrier's approved delivery days", '#'
				- else
					-	@day = Day.where(destination_id: @destination.id, carrier_id: c.carrier_id).last
					%td{class:"#{@day.sn}"}= @day.sn
					%td{class:"#{@day.m}"}= @day.m
					%td{class:"#{@day.t}"}= @day.t
					%td{class:"#{@day.w}"}= @day.w
					%td{class:"#{@day.r}"}= @day.r
					%td{class:"#{@day.f}"}= @day.f
					%td{class:"#{@day.sa}"}= @day.sa
					- if @dotw == "Sunday" && @day.sn == true
						%td Yes
						- @recommended.push(Carrier.find(c.carrier_id).name)
					- elsif @dotw == "Monday" && @day.m == true
						%td Yes
						- @recommended.push(Carrier.find(c.carrier_id).name)
					- elsif @dotw == "Tuesday" && @day.t == true
						%td Yes
						- @recommended.push(Carrier.find(c.carrier_id).name)
					- elsif @dotw == "Wednesday" && @day.w == true
						%td Yes
						- @recommended.push(Carrier.find(c.carrier_id).name)
					- elsif @dotw == "Thursday" && @day.r == true
						%td Yes
						- @recommended.push(Carrier.find(c.carrier_id).name)
					- elsif @dotw == "Friday" && @day.f == true
						%td Yes
						- @recommended.push(Carrier.find(c.carrier_id).name)
					- elsif @dotw == "Saturday" && @day.sa == true
						%td Yes
						- @recommended.push(Carrier.find(c.carrier_id).name)
					- else 
						%td No
%br
%table
	%tr
		%th{colspan:2} Holidays
	%tr
		%th Name
		%th Date
	- if @holidays.length < 1
		%tr
			%td{colspan:2}= link_to "Add a Holiday for this Location", new_destination_destination_holiday_path(@destination.id)
	- else 
		- @holidays.each do |h|
			%tr
				%td= Holiday.find(h.holiday_id).name
				%td= Holiday.find(h.holiday_id).date
%h4 Recomended Carriers							
%ul
	- @recommended.each do |r|
		%li= r
	